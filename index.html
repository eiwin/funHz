<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶£å­¦æ±‰å­—</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>è¶£å­¦æ±‰å­—</h1>
            <div class="input-section">
                <input type="text" id="characterInput" placeholder="è¯·è¾“å…¥ä¸€ä¸ªæ±‰å­—" maxlength="1">
            </div>
        </header>

        <main class="content">
            <!-- ç¤ºä¾‹å†…å®¹ -->
            <section class="character-display">
                <div class="main-character">
                    <ruby>æ ‘<rt>shÃ¹</rt></ruby>
                    <button class="play-sound" onclick="speak('æ ‘')">ğŸ”Š</button>
                </div>
                <div class="english">tree</div>
            </section>

            <section class="words-section">
                <h2>å¸¸ç”¨è¯è¯­ / Common Words</h2>
                <div class="word-items-grid">
                    <div class="word-item">
                        <div class="chinese">
                            <ruby>å¤§<rt>dÃ </rt></ruby><ruby>æ ‘<rt>shÃ¹</rt></ruby>
                            <button class="play-sound" onclick="speak('å¤§æ ‘')">ğŸ”Š</button>
                        </div>
                        <div class="english">big tree</div>
                    </div>
                    <div class="word-item">
                        <div class="chinese">
                            <ruby>æ ‘<rt>shÃ¹</rt></ruby><ruby>å¶<rt>yÃ¨</rt></ruby>
                            <button class="play-sound" onclick="speak('æ ‘å¶')">ğŸ”Š</button>
                        </div>
                        <div class="english">leaf</div>
                    </div>
                    <div class="word-item">
                        <div class="chinese">
                            <ruby>æœ<rt>guÇ’</rt></ruby><ruby>æ ‘<rt>shÃ¹</rt></ruby>
                            <button class="play-sound" onclick="speak('æœæ ‘')">ğŸ”Š</button>
                        </div>
                        <div class="english">fruit tree</div>
                    </div>
                    <div class="word-item">
                        <div class="chinese">
                            <ruby>ç§<rt>zhÃ²ng</rt></ruby><ruby>æ ‘<rt>shÃ¹</rt></ruby>
                            <button class="play-sound" onclick="speak('ç§æ ‘')">ğŸ”Š</button>
                        </div>
                        <div class="english">plant trees</div>
                    </div>
                </div>
            </section>

            <section class="sentences-section">
                <h2>ä¾‹å¥ / Example Sentences</h2>
                <div class="sentence-item">
                    <div class="chinese">
                        <ruby>é™¢<rt>yuÃ n</rt></ruby>
                        <ruby>å­<rt>zi</rt></ruby>
                        <ruby>é‡Œ<rt>lÇ</rt></ruby>
                        <ruby>æœ‰<rt>yÇ’u</rt></ruby>
                        <ruby>ä¸€<rt>yÄ«</rt></ruby>
                        <ruby>æ£µ<rt>kÄ“</rt></ruby>
                        <ruby>å¤§<rt>dÃ </rt></ruby>
                        <ruby>æ ‘<rt>shÃ¹</rt></ruby>ã€‚
                        <button class="play-sound" onclick="speak('é™¢å­é‡Œæœ‰ä¸€æ£µå¤§æ ‘')">ğŸ”Š</button>
                    </div>
                    <div class="english">There is a big tree in the yard.</div>
                </div>
                <div class="sentence-item">
                    <div class="chinese">
                        <ruby>æ˜¥<rt>chÅ«n</rt></ruby>
                        <ruby>å¤©<rt>tiÄn</rt></ruby>
                        <ruby>æ ‘<rt>shÃ¹</rt></ruby>
                        <ruby>å¶<rt>yÃ¨</rt></ruby>
                        <ruby>å˜<rt>biÃ n</rt></ruby>
                        <ruby>ç»¿<rt>lÇœ</rt></ruby>
                        <ruby>äº†<rt>le</rt></ruby>ã€‚
                        <button class="play-sound" onclick="speak('æ˜¥å¤©æ ‘å¶å˜ç»¿äº†')">ğŸ”Š</button>
                    </div>
                    <div class="english">The leaves turn green in spring.</div>
                </div>
            </section>

            <section class="fun-facts">
                <h2>è¶£å‘³è§£é‡Š / Fun Facts</h2>
                <div class="fun-fact-item">
                    <div class="chinese">
                        <ruby>æ ‘<rt>shÃ¹</rt></ruby>æ˜¯å¤§è‡ªç„¶é€ç»™æˆ‘ä»¬çš„ç¤¼ç‰©ï¼å®ƒä»¬ä¸ä»…èƒ½ç»™æˆ‘ä»¬æ–°é²œç©ºæ°”ï¼Œè¿˜èƒ½ä¸ºå°é¸Ÿæä¾›å®¶å›­ã€‚æœ‰çš„æ ‘èƒ½é•¿å¾—æ¯”äº”å±‚æ¥¼è¿˜è¦é«˜ï¼Œæœ‰çš„æ ‘èƒ½æ´»å‡ ç™¾å¹´ã€‚åœ¨ä¸åŒçš„å­£èŠ‚ï¼Œæ ‘å¶ä¼šå˜æˆä¸åŒçš„é¢œè‰²ï¼Œå°±åƒä¼šå˜é­”æœ¯ä¸€æ ·ç¥å¥‡ï¼
                    </div>
                    <div class="english">
                        Trees are nature's gift to us! They not only give us fresh air but also provide homes for birds. Some trees can grow taller than a five-story building, and some can live for hundreds of years. In different seasons, the leaves change colors, like magic!
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        function speak(text) {
            // åˆ›å»ºè¯­éŸ³åˆæˆå¯¹è±¡
            const utterance = new SpeechSynthesisUtterance(text);
            // è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡
            utterance.lang = 'zh-CN';
            // æ’­æ”¾è¯­éŸ³
            window.speechSynthesis.speak(utterance);
        }

        // é¡µé¢åŠ è½½æ—¶è·å–éšæœºæ±‰å­—
        async function loadRandomCharacter() {
            try {
                const response = await fetch('/api/random-character');
                const data = await response.json();
                updateContent(data);
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // è¾“å…¥æ¡†å¤„ç†å‡½æ•°
        async function handleCharacterInput(event) {
            const character = event.target.value;
            if (character.length === 1) {
                try {
                    const response = await fetch(`/api/character/${character}`);
                    const data = await response.json();
                    updateContent(data);
                } catch (error) {
                    console.error('Error:', error);
                }
            }
        }

        function updateContent(data) {
            // æ›´æ–°ä¸»å­—ç¬¦
            document.querySelector('.main-character').innerHTML = 
                `<ruby>${data.character}<rt>${data.pinyin}</rt></ruby>
                 <button class="play-sound" onclick="speak('${data.character}')">ğŸ”Š</button>`;
            
            // æ›´æ–°è‹±æ–‡ç¿»è¯‘
            document.querySelector('.character-display .english').textContent = data.english;

            // æ›´æ–°è¯è¯­
            const wordsGrid = document.querySelector('.word-items-grid');
            wordsGrid.innerHTML = data.words.map(word => `
                <div class="word-item">
                    <div class="chinese">
                        ${word.chinese.split('').map(char => 
                            `<ruby>${char}<rt>${word.pinyin[char]}</rt></ruby>`
                        ).join('')}
                        <button class="play-sound" onclick="speak('${word.chinese}')">ğŸ”Š</button>
                    </div>
                    <div class="english">${word.english}</div>
                </div>
            `).join('');

            // æ›´æ–°ä¾‹å¥
            const sentencesSection = document.querySelector('.sentences-section');
            sentencesSection.innerHTML = data.sentences.map(sentence => `
                <div class="sentence-item">
                    <div class="chinese">
                        ${sentence.chinese.split('').map(char => 
                            `<ruby>${char}<rt>${sentence.pinyin[char]}</rt></ruby>`
                        ).join('')}
                        <button class="play-sound" onclick="speak('${sentence.chinese}')">ğŸ”Š</button>
                    </div>
                    <div class="english">${sentence.english}</div>
                </div>
            `).join('');

            // æ›´æ–°è¶£å‘³è§£é‡Š
            document.querySelector('.fun-fact-item').innerHTML = `
                <div class="chinese">${data.funFact.chinese}</div>
                <div class="english">${data.funFact.english}</div>
            `;
        }

        // æ·»åŠ è¾“å…¥æ¡†äº‹ä»¶ç›‘å¬
        document.getElementById('characterInput').addEventListener('input', handleCharacterInput);

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', loadRandomCharacter);
    </script>
</body>
</html> 